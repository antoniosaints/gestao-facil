<div class="h-full flex items-center justify-center">
    <div class="h-full border bg-background dark:bg-background-dark border-border dark:border-border-dark p-6 rounded-2xl shadow-md w-full max-w-7xl">
        <h2 class="text-2xl font-bold mb-4 dark:text-white" id="titulo_detalhes_produto">Detalhes do Produto</h2>

        <div class="grid grid-cols-2 gap-4 text-sm dark:text-white">
            <div>
                <span class="font-semibold">Nome:</span>
                <span class="ml-2">Memória Kingston 16GB DDR4</span>
            </div>
            <div>
                <span class="font-semibold">Código:</span>
                <span class="ml-2">123456</span>
            </div>
            <div>
                <span class="font-semibold">Preço:</span>
                <span class="ml-2 text-green-600 font-medium">R$ 280,00</span>
            </div>
            <div>
                <span class="font-semibold">Estoque:</span>
                <span class="ml-2">45 unidades</span>
            </div>
            <div>
                <span class="font-semibold">Mínimo em estoque:</span>
                <span class="ml-2">10</span>
            </div>
            <div>
                <span class="font-semibold">Unidade:</span>
                <span class="ml-2">Peça</span>
            </div>
            <div class="col-span-2">
                <span class="font-semibold">Descrição:</span>
                <p class="mt-1 dark:text-gray-200">
                    Memória RAM Kingston 16GB DDR4 3200MHz, ideal para upgrades em desktops de alto desempenho.
                </p>
            </div>
        </div>

        <div class="mt-6">
            <button type="button" onclick="loadPage('partials/produtos/index.html')"
                class="bg-secondary text-sm hover:opacity-90 text-white px-3 py-1.5 rounded-md">
                <i class="fa-solid fa-backward"></i> Voltar
            </button>
            <button onclick="editarProduto()" class="bg-primary-dark text-sm text-white px-3 py-1.5 rounded-md">
                <i class="fa-solid fa-pen-to-square"></i>
                Editar
            </button>
            <button onclick="excluirProduto(localStorage.getItem('produtoId'))"
                class="bg-danger text-sm text-white px-3 py-1.5 rounded-md">
                <i class="fa-solid fa-trash-can"></i>
                Excluir
            </button>
        </div>
    </div>
</div>

<script>
    (() => {
        $("#titulo_detalhes_produto").text(`Detalhes do Produto #${localStorage.getItem("produtoId")}`);
    })();
    function editarProduto() {
        htmx.ajax("GET", "partials/produtos/formulario.html", {
            target: "#content",
            swap: "innerHTML",
        });
    }
    function excluirProduto(id) {
        Swal.fire({
            title: "Excluir produto",
            text: "Tem certeza que deseja excluir este produto?",
            icon: "warning",
            showCancelButton: true,
            confirmButtonColor: "#3085d6",
            cancelButtonColor: "#d33",
            confirmButtonText: "Sim, excluir!",
            cancelButtonText: "Cancelar",
        }).then((result) => {
            if (result.isConfirmed) {
                $.ajax({
                    dataType: "json",
                    type: "DELETE",
                    url: `/produtos/${id}`,
                    beforeSend: function (xhr) {
                        const tokenJWT = localStorage.getItem("gestao_facil:token");
                        if (tokenJWT) {
                            xhr.setRequestHeader("Authorization", `Bearer ${tokenJWT}`);
                        }
                        Swal.fire({
                            title: "Carregando...",
                            allowOutsideClick: false,
                            allowEscapeKey: false,
                            showConfirmButton: false,
                            didOpen: () => {
                                Swal.showLoading();
                            },
                        });
                    },
                    success: function (response) {
                        Swal.fire({
                            title: "Produto excluído!",
                            text: "O produto foi excluído com sucesso!",
                            icon: "success",
                            toast: true,
                            showConfirmButton: false,
                            position: "bottom-end",
                            timer: 3000,
                        });
                        htmx.ajax("GET", "partials/produtos/index.html", {
                            target: "#content",
                            swap: "innerHTML",
                        });
                    },
                    error: function (error) {
                        Swal.fire({
                            title: "Erro ao excluir produto!",
                            text: "Ocorreu um erro ao excluir o produto. Por favor, tente novamente.",
                            icon: "error",
                            confirmButtonColor: "#3085d6",
                            confirmButtonText: "OK",
                        });
                    }
                })
            }
        });
    }
</script>